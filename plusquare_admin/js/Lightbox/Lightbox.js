define(["jquery","ui-elements"],function(a){var h=function(a,b,d,e,f,g){void 0==f&&(f="Exit without saving");void 0==g&&(g='Submit <img class="arrow-icon" src="'+b+'UI_Elements/arrow.png"/>');void 0==e&&(e=900);this.title=a;this.builderPath=b;this.saveFunction=d;this.exit_text=f;this.submit_text=g;this.width=e;this.build()};h.prototype={build:function(){var c=a("body"),b=this.width;this.lightboxInUse=c.hasClass("adminLightboxOpened");c.addClass("adminLightboxOpened");this.$cover=a("<div></div>").css({width:"100%",
height:"100%","background-color":"#000",position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px","z-index":this.lightboxInUse?"101":"99"}).fadeTo(0,0).fadeTo(200,0.7).appendTo(c);var d=a(window).scrollTop();this.$editPage=a("<div></div>").css({position:"absolute",width:b+"px","background-color":"#fff",top:40+d+"px",left:-b/2+"px","margin-left":"50%","margin-bottom":"50px","z-index":this.lightboxInUse?"102":"100",overflow:"hidden"}).fadeTo(0,0).fadeTo(200,1).appendTo(c);addRoundCorners(this.$editPage,
"3px");processFont(this.$editPage,"AllerRegular","#26202A",15);this.$menu=a("<div>"+this.title+"</div>").css({position:"relative",display:"block","background-color":"#EEEEEE",padding:"20px 25px","border-bottom":"solid 1px #CCCCCC"}).appendTo(this.$editPage);this.$exitButton=a('<a href="#"></a>').css({width:"9px",height:"9px","background-image":"url("+this.builderPath+"UI_Elements/lightbox_close.png)",position:"relative","float":"right",left:"-10px",top:"6px"}).appendTo(this.$menu).click(a.proxy(this.closeEdit,
this));this.$content=a("<div></div>").css({position:"relative",padding:"20px 25px",display:"block"}).appendTo(this.$editPage);this.$loadingOptions=a("<div>Loading Options</div>").css({position:"relative",display:"block","padding-left":"30px","background-image":"url("+this.builderPath+"UI_Elements/loading.gif)","background-repeat":"no-repeat","background-position":"0 50%"}).appendTo(this.$content);this.$submitMenu=a("<div></div>").css({position:"relative",padding:"20px 25px","border-top":"solid 1px #EEEEEE",
overflow:"hidden"}).appendTo(this.$editPage);this.$submitButton=a('<a class="ui-button disabled" href="#">'+this.submit_text+"</a>").css({position:"relative","float":"right"}).appendTo(this.$submitMenu).click(a.proxy(this.saveEdit,this));this.$exitButton=a('<a class="ui-button disabled" href="#">'+this.exit_text+"</a>").css({position:"relative","float":"right",left:"-10px"}).appendTo(this.$submitMenu).click(a.proxy(this.closeEdit,this))},addContent:function(a){this.$content.append(a);this.$loadingOptions.css("display",
"none");this.$submitButton.removeClass("disabled");this.$exitButton.removeClass("disabled")},switchLoading:function(a){this.$submitButton.addClass("disabled");this.$exitButton.addClass("disabled");this.$content.html(this.$loadingOptions);this.$loadingOptions.css("display","block");this.$loadingOptions.text(a)},closeEdit:function(){this.$editPage.fadeTo(200,0);this.$cover.fadeTo(200,0,a.proxy(function(){this.$editPage.remove();this.$cover.remove()},this));this.lightboxInUse||$body.removeClass("adminLightboxOpened");
a(this).trigger("close_lightbox");return!1},saveEdit:function(){this.saveFunction.call();return!1}};return h});

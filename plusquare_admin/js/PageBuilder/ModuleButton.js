define(["jquery","libraries/jquery.mobile.vmouse","ui-elements","libraries/inheritance"],function(a){var d=Class.extend({mouseDown:function(b){$body.append(this.$toDrag);var c=this.$obj.offset();this.currentLeft=c.left;this.currentTop=c.top;this.currentX=b.pageX;this.currentY=b.pageY;this.$toDrag.css({left:this.currentLeft,top:this.currentTop,display:"block","z-index":"1001"}).fadeTo(0,1);if("module"==this.type)a(this).trigger("moduleButtonDown",[this.shortcode,this.currentLeft,this.currentTop]);
else if("placeholder"==this.type)a(this).trigger("moduleButtonDown",[this.sizes,this.size,this.currentX,this.currentY]);else return;a(document).bind(mouseMoveBind,a.proxy(this.mouseMove,this));a(document).bind(mouseUpBind,a.proxy(this.mouseUp,this));return!1},mouseMove:function(b){var c=b.pageX;b=b.pageY;this.currentLeft+=c-this.currentX;this.currentTop+=b-this.currentY;this.currentX=c;this.currentY=b;this.$toDrag.css({left:this.currentLeft,top:this.currentTop});a(this).trigger("moduleButtonMove",
[c,b])},mouseUp:function(){unbindMoveAndUp();this.$toDrag.stop().fadeTo(500,0,function(){a(this).css("display","none")});a(this).trigger("moduleButtonUp",[this.currentLeft,this.currentTop]);return!1}}),f=d.extend({init:function(b){var c=builderPath+b.icon,e=b.name;this.shortcode=b.shortcode;this.info=b;this.type="module";this.$obj=a("<a href='#' alt='"+e+"'>"+e+"</a>").css({"text-decoration":"none",display:"block",width:"91px",margin:"0",padding:"9px 9px 9px 30px","background-image":"url("+c+")",
"background-repeat":"no-repeat","background-position":"5px 50%","border-bottom":"solid 1px #464646"});processFont(this.$obj,"AllerRegular","#fff",12);this.$toDrag=a("<div></div>").append(this.$obj.clone().css({border:"none"})).css({width:"130px",height:"29px","background-image":"url("+builderPath+"images/Modules/drag_background.png)","background-repeat":"no-repeat",position:"absolute","z-index":"2"});this.$obj.hover(function(){a(this).css("background-color","#2C2C2C")},function(){a(this).css("background-color",
"transparent")});new Tooltip(this.$obj,e,builderPath);preventDragDefault(this.$obj);this.$obj.bind(mouseDownBind,a.proxy(this.mouseDown,this))}}),d=d.extend({init:function(b,c,e){this.info={};this.info.text=c;this.sizes=e;for(var d=this.size=0;d<e.length;d++)this.size+=e[d];this.type="placeholder";this.$obj=a("<a href='#' alt='"+c+"'></a>").css({"text-decoration":"none",display:"block",width:"172px",height:"29px",margin:"0","background-image":"url("+b+")","background-repeat":"no-repeat","background-position":"8px 10px",
"border-bottom":"solid 1px #464646"});this.$toDrag=a("<div></div>").append(this.$obj.clone().css({border:"none"})).css({width:"172px",height:"29px","background-image":"url("+builderPath+"images/Placeholder/drag_background.png)","background-repeat":"no-repeat",position:"absolute","z-index":"2"});this.$obj.hover(function(){a(this).css("background-color","#2C2C2C")},function(){a(this).css("background-color","transparent")});new Tooltip(this.$obj,c,builderPath);preventDragDefault(this.$obj);this.$obj.bind(mouseDownBind,
a.proxy(this.mouseDown,this))}});return{ComponentButton:f,PlaceholderButton:d}});

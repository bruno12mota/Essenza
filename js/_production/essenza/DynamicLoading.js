var esza_url=directory.esza_url,esza_disable_ajax=directory.esza_disable_ajax;
define(["jquery","utils/utils"],function(b){function q(a){var c=0;g?(n.remove(),b(a).insertAfter(p),c="comments"==h?b("#comments_replace_content_wraper").offset().top-80:0):(b("#page-wraper").remove(),b("#page-wraper-full").remove(),b(a).insertAfter(b("#header")));b("body").hasClass("runtime_javascript_ready")&&plusquare_runtime_javascript(!0,g,c);k=g=!1}var l=!1,k=!1,g=!1,n,p,h,d=[document.URL],f=function(a,c,e,d){this.href=a.attr("href");-1!=this.href.indexOf(esza_url)&&(-1==this.href.indexOf(".pdf")&&
"true"!=esza_disable_ajax)&&(a.addClass("dynamic_binded"),this.$holder=c,this.$afterThis=e,this.idAction=d,a.removeClass("dynamic_loading"),void 0==this.idAction&&-1<this.href.indexOf("rel=ajax")?(this.href=this.href.replace("&rel=ajax",""),this.href=this.href.replace("?rel=ajax",""),a.attr("href",this.href)):void 0!=this.idAction&&(this.href=this.href.replace("&rel=ajax",""),this.href=this.href.replace("?rel=ajax",""),this.href=this.href.replace("&rel="+this.idAction,""),this.href=this.href.replace("?rel="+
this.idAction,""),a.attr("href",this.href)),a.bind(clickBind,b.proxy(this.onClick,this)))},m=function(a){l=k=!0;contentLoadingIn();if(-1===a.indexOf("rel=")){var c=g?h:"ajax",e=a+"?rel="+c,e=a.match(RegExp(".*?\\?(.+\\=.+)+","gi")),f=a.match(RegExp("\\#.+","gi"));null!=f&&(a=a.substring(0,a.length-f[0].length));e=null!=e?a+"&rel="+c:a+"?rel="+c;null!=f&&(e+=f[0])}else e=a,a=a.replace("&rel=ajax",""),a=a.replace("?rel=ajax",""),void 0!=h&&(a=a.replace("&rel="+h,""),a=a.replace("?rel="+h,""));b.ajax({url:e,
success:q});a!=window.location&&void 0!=window.history.pushState&&window.history.pushState({path:a},"",a);d.push(a)};f.prototype={onClick:function(a){a.preventDefault();k||(void 0!=this.idAction?(n=this.$holder,p=this.$afterThis,h=this.idAction,g=!0):g=!1,m(this.href));return!1}};b(document).ready(function(){b("#menu a").each(function(){new f(b(this))});b("#menu_mobile a").each(function(){new f(b(this))});b("#searchform").submit(function(a){var c=b(this).find("#search").val();if(""==c)return a.preventDefault(),
!1;a=b(this).attr("action");b("#search_info").trigger("close");c=a+"?s="+c;m(c,c+"&rel=ajax");return!1});b(window).bind("popstate",function(a){if(l){if(1==d.length)return!0;d.pop();a=d[d.length-1];0<d.length&&d.pop();m(a)}else l=!0})});return f});
